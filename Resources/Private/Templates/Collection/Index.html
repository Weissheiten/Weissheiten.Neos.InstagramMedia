{namespace f=TYPO3\Fluid\ViewHelpers}
{namespace neos=TYPO3\Neos\ViewHelpers}

<f:layout name="Default" />

<f:section name="Title">Instagram Collections</f:section>

<f:section name="Content">
    <div class="instagramMedia">
        <aside class="instagramCollectionList">
            <div class="instagramSearch">
                <div class="form-group">
                    <form action="{f:uri.action(action: 'index')}" method="get" class="neos-search">
                        <input type="search" name="{f:if(condition: argumentNamespace, then: '{argumentNamespace}[searchTerm]', else: 'searchTerm')}" placeholder="Search" value="{searchTerm}" autofocus="autofocus" />
                        <button type="submit" title="Search in instagram" data-neos-toggle="tooltip"><i class="icon-search"></i></button>
                    </form>
                </div>
            </div>

            <f:render partial="InstagramCollectionList" arguments="{'instagramCollections':instagramCollections}"></f:render>

            <div class="collectionAddPanel">
                <f:form method="post" class="createInstagramCollection" action="createInstagramCollection" object="{instagramCollection}" objectName="instagramCollection">
                   <f:form.textfield property="title" class="form-control" placeholder="Enter InstagramCollection title" id="collectionNameID" /><br/>
                   <f:form.submit value="{neos:backend.translate(id: 'add', value: 'Add')}" class="neos-button neos-button-primary" />
                </f:form>
            </div>


        </aside>

        <div class="instagramAssets">
            <f:if condition="{instagramSearchResult}">
                <div class="row">
                    <div class="col-xs-12">
                        <ul class="neos-thumbnails asset-list">
                            <f:for each="{instagramSearchResult}" as="searchResult">
                                <li>
                                    <f:render partial="instagramImage" arguments="{'instagramImage':searchResult}"></f:render>
                                </li>
                            </f:for>
                        </ul>
                    </div>
                </div>
            </f:if>
        </div>
    </div>
<div style="clear:both;"></div>
</f:section>

<f:section name="Scripts">
    <f:form action="addInstagramImageToCollection" id="link-image-to-instagramcollection-form" format="json">
        <f:form.hidden name="image[__identity]" id="link-image-to-instagramcollection-form-image" />
        <f:form.hidden name="imageCollection[__identity]" id="link-image-to-instagramcollection-form-imagecollection" />
    </f:form>


    <script type="text/javascript" src="{f:uri.resource(package: 'TYPO3.Media', path: 'Libraries/jquery-ui/js/jquery-ui-1.10.3.custom.js')}"></script>
    <script type="text/javascript" src="{f:uri.resource(package: 'Weissheiten.Neos.InstagramMedia', path: 'Scripts/instagramCollections.js')}"></script>
</f:section>